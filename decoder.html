<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Steganography Decoder & Encoder</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="decoder.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="app-header-title">
        <h1>Steganography Decoder & Encoder</h1>
        <p>Encode and decode hidden messages in images using LSB steganography.</p>
      </div>
      <nav class="tabs">
        <button class="tab-button active" data-tab="decode">Decode</button>
        <button class="tab-button" data-tab="encode">Encode</button>
        <button class="tab-button" data-tab="more">Feedback</button>
      </nav>
    </header>

    <main class="app-main">
      <section class="panel panel-left">
        <h2>Image</h2>

        <div class="upload-area" id="dropZone">
          <input
            id="fileInput"
            type="file"
            accept="image/*"
            class="file-input"
          />
          <div class="upload-content">
            <p class="upload-text">
              Click to choose an image or drag &amp; drop it here
            </p>
            <button type="button" class="upload-button">
              Load image
            </button>
          </div>
        </div>

        <div class="image-preview-container">
          <h3>Preview</h3>
          <div class="image-preview">
            <img id="imagePreview" alt="Preview" />
          </div>
        </div>

        <div class="metadata-container">
          <h3>Metadata</h3>
          <dl id="metadataList" class="metadata-list"></dl>
        </div>

        <div id="capacityInfo" class="capacity-info" style="display: none;">
          <h3>Capacity</h3>
          <p id="capacityText"></p>
        </div>
      </section>

      <section class="panel panel-right" id="decodePanel">
        <h2>Decoder</h2>

        <form id="decoderForm" class="decoder-form">
          <div class="form-row form-actions">
            <div class="button-group decode-mode-buttons">
              <button id="autoDetectButton" type="button" class="button-primary decode-mode-btn">AUTO DECODE</button>
              <button id="manualDecodeToggle" type="button" class="button-secondary decode-mode-btn">
                <span class="toggle-arrow">▶</span> MANUAL DECODE
              </button>
            </div>
            <span id="statusLabel" class="status-label"></span>
          </div>
          <div id="currentParamsInfo" class="current-params-info" style="display: none;">
            <span id="currentParamsText" class="current-params-text"></span>
          </div>

          <div id="manualDecodeOptions" class="manual-decode-options" style="display: none;">
            <div class="form-row">
              <label for="bitsPerChannel">Bits per channel</label>
              <input
                id="bitsPerChannel"
                type="number"
                min="1"
                max="8"
                step="1"
                value="1"
              />
            </div>

            <div class="form-row">
              <span class="label">Channels</span>
              <div class="checkbox-group">
                <label>
                  <input id="channelR" type="checkbox" checked />
                  R
                </label>
                <label>
                  <input id="channelG" type="checkbox" checked />
                  G
                </label>
                <label>
                  <input id="channelB" type="checkbox" checked />
                  B
                </label>
              </div>
            </div>

            <div class="form-row">
              <span class="label">Pixel order</span>
              <div class="radio-group">
                <label>
                  <input
                    type="radio"
                    name="pixelOrder"
                    value="row"
                    checked
                  />
                  Left to right (rows)
                </label>
                <label>
                  <input type="radio" name="pixelOrder" value="column" />
                  Top to bottom (columns)
                </label>
              </div>
            </div>

            <div class="form-row">
              <span class="label">Encoding</span>
              <div class="radio-group">
                <label>
                  <input
                    type="radio"
                    name="encoding"
                    value="utf8"
                    checked
                  />
                  UTF-8
                </label>
                <label>
                  <input type="radio" name="encoding" value="ascii" />
                  ASCII
                </label>
              </div>
            </div>

            <div class="form-row form-actions">
              <button id="decodeButton" type="button">Decode</button>
            </div>
          </div>
          <div id="progressContainer" class="progress-container" style="display: none;">
            <div class="progress-bar">
              <div id="progressBar" class="progress-bar-fill"></div>
            </div>
            <span id="progressText" class="progress-text">0%</span>
          </div>
        </form>

        <section id="candidatesSection" class="candidates-section" style="display: none;">
          <div class="results-header">
            <h3>Possible decodings:</h3>
            <span class="candidates-count"></span>
          </div>
          <div id="candidatesList" class="candidates-list"></div>
        </section>

        <section id="decodedTextSection" class="results-section" style="display: none;">
          <div class="results-header">
            <h3>Decoded text</h3>
            <div class="header-buttons">
              <button id="copyTextButton" type="button">Copy text</button>
            </div>
          </div>
          <div
            id="textOutput"
            class="results-text"
          ></div>
        </section>

        <section id="hexViewSection" class="results-section" style="display: none;">
          <div class="results-header">
            <h3>Hex view</h3>
            <button id="copyHexButton" type="button">Copy hex</button>
          </div>
          <pre id="hexOutput" class="results-hex"></pre>
        </section>
      </section>

      <section class="panel panel-right" id="encodePanel" style="display: none;">
        <h2>Encoder</h2>

        <form id="encoderForm" class="decoder-form">
          <div class="form-row form-row-textarea">
            <label for="messageInput">Message to encode</label>
            <div class="textarea-wrapper">
              <textarea
                id="messageInput"
                class="message-input"
                rows="4"
                placeholder="Enter text to hide in the image..."
              ></textarea>
              <span class="char-counter">
                <span id="charCount">0</span> characters
              </span>
            </div>
          </div>

          <div class="form-row">
            <button type="button" id="toggleEncoderOptions" class="toggle-options-btn">
              <span class="toggle-icon">▼</span> Show encoder options
            </button>
          </div>

          <div id="encoderOptions" class="encoder-options" style="display: none;">
            <div class="form-row">
              <label for="encodeBitsPerChannel">Bits per channel</label>
              <input
                id="encodeBitsPerChannel"
                type="number"
                min="1"
                max="8"
                step="1"
                value="1"
              />
            </div>

            <div class="form-row">
              <span class="label">Channels</span>
              <div class="checkbox-group">
                <label>
                  <input id="encodeChannelR" type="checkbox" checked />
                  R
                </label>
                <label>
                  <input id="encodeChannelG" type="checkbox" checked />
                  G
                </label>
                <label>
                  <input id="encodeChannelB" type="checkbox" checked />
                  B
                </label>
              </div>
            </div>

            <div class="form-row">
              <span class="label">Pixel order</span>
              <div class="radio-group">
                <label>
                  <input
                    type="radio"
                    name="encodePixelOrder"
                    value="row"
                    checked
                  />
                  Left to right (rows)
                </label>
                <label>
                  <input type="radio" name="encodePixelOrder" value="column" />
                  Top to bottom (columns)
                </label>
              </div>
            </div>

            <div class="form-row">
              <span class="label">Encoding</span>
              <div class="radio-group">
                <label>
                  <input
                    type="radio"
                    name="encodeEncoding"
                    value="utf8"
                    checked
                  />
                  UTF-8
                </label>
                <label>
                  <input type="radio" name="encodeEncoding" value="ascii" />
                  ASCII
                </label>
              </div>
            </div>

            <div class="form-row">
              <label>
                <input id="fillWithZeros" type="checkbox" checked />
                Fill remaining capacity with zeros
              </label>
            </div>
          </div>

          <div class="form-row form-actions">
            <button id="encodeButton" type="button">Encode</button>
            <span id="encodeStatusLabel" class="status-label"></span>
          </div>
        </form>

        <section id="encodedPreviewSection" class="results-section" style="display: none;">
          <div class="results-header">
            <h3>Encoded image preview</h3>
            <button id="downloadButton" type="button" class="secondary" style="display: none;">
              Download
            </button>
          </div>
          <div class="encoded-preview">
            <canvas id="encodedCanvas"></canvas>
          </div>
        </section>
      </section>

      <section class="panel panel-right" id="morePanel" style="display: none;">
        <h2>More Features</h2>
        <div class="more-features-content">
          <pre class="ascii-art">
 _____ _____ _     _        _   _ ____       _    _   _ __   __ _____ _   _ ___ _   _  ____
|_   _| ____| |   | |      | | | / ___|     / \  | \ | |\ \ / /|_   _| | | |_ _| \ | |/ ___|
  | | |  _| | |   | |      | | | \___ \    / _ \ |  \| | \ V /   | | | |_| || ||  \| | |  _
  | | | |___| |___| |___   | |_| |___) |  / ___ \| |\  |  | |    | | |  _  || || |\  | |_| |
  |_| |_____|_____|_____|   \___/|____/  /_/   \_\_| \_|  |_|    |_| |_| |_|___|_| \_|\____|
          </pre>
          <a
            class="ask-button"
            href="https://forms.gle/2KnvLNKiq1zYNhFP7"
            target="_blank"
            rel="noopener noreferrer"
          >
            TELL
          </a>
        </div>
      </section>
    </main>

    <script type="module" src="decoder.js"></script>
    <script type="module" src="encoder.js"></script>
  </body>
  </html>


